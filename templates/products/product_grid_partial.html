{% for product in products %}
<div class="product-card card fade-in">
    <div class="product-image">
        {% if product.images.first %}
            <img src="{{ product.images.first.image.url }}" alt="{{ product.name }}" 
                 data-src="{{ product.images.first.image.url }}">
        {% else %}
            <div class="product-placeholder">
                <i class="fas fa-swimming-pool"></i>
            </div>
        {% endif %}
        

    </div>
    
    <div class="product-info">
        {% if product.category %}
            <div class="product-category">{{ product.category.name }}</div>
        {% endif %}
        
        <h3 class="product-name">{{ product.name }}</h3>
        
        {% if product.short_description %}
            <p class="product-description">{{ product.short_description }}</p>
        {% endif %}
        
        <div class="product-price-actions">
            <div class="product-price">₽{{ product.price|floatformat:0 }}</div>
            <div class="product-actions">
                <div class="product-actions">
    <a href="{% url 'product_detail' product.id %}" class="btn-product btn-detail">
        <i class="fas fa-info-circle"></i> Подробнее
    </a>
    <button class="btn-product btn-primary" onclick="quickOrder('{{ product.id }}')">
        <i class="fas fa-shopping-cart"></i> Заказать
    </button>
</div>
            </div>
        </div>
    </div>
</div>
{% empty %}
<div class="empty-state" style="grid-column: 1 / -1;">
    <i class="fas fa-search"></i>
    <h3>Товары не найдены</h3>
    <p>Попробуйте изменить параметры поиска или сбросить фильтры</p>
    <a href="{% url 'product_list' %}" class="btn btn-primary">
        <span>Показать все товары</span>
        <i class="fas fa-redo"></i>
    </a>
</div>
{% endfor %}

<style>
.product-placeholder {
    width: 100%;
    height: 100%;
    background: linear-gradient(135deg, #f8fafc 0%, #e2e8f0 100%);
    display: flex;
    align-items: center;
    justify-content: center;
    color: var(--text-light);
    font-size: 3rem;
}
.product-actions {
    display: flex;
    gap: 0.6rem;
    width: 100%;
}
.btn-product {
    flex: 1 1 50%;
    min-width: 0;
    justify-content: center;
}
@media (max-width: 600px) {
    .product-actions {
        flex-direction: column;
    }
    .btn-product {
        width: 100%;
    }
}


</style>

<script>
function quickOrder(productId) {
    // Open quick order modal or redirect to order page
    // productId string sifatida keladi, shuning uchun uni raqamga o'giramiz
    const id = parseInt(productId);
    window.location.href = `{% url 'order_create' %}?product=${id}`;
}
</script>
